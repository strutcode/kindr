import{d as w,A as v,c,a as t,t as u,h as o,w as _,g as m,E as x,B as g,j as l,I as k,o as n,_ as D,k as z,e as B,p as E,F as I,C as S,n as T,i as V,x as M}from"./index-BGnEo6Zc.js";import{useAlertsStore as N}from"./alerts-DP9TFFJE.js";import{C as A}from"./constants-DDm60LNs.js";import{_ as F}from"./Chip.vue_vue_type_script_setup_true_lang-C_-WEaxW.js";const L={class:"alert-card"},R={class:"alert-header"},Y={class:"alert-info"},j={class:"alert-name"},G={class:"alert-details"},O={class:"alert-radius"},U={key:0,class:"alert-category"},q={key:1,class:"alert-category-all"},H={class:"alert-actions"},J={class:"alert-location"},K={class:"alert-meta"},P={class:"alert-date"},Q=w({__name:"AlertCard",props:{alert:{}},emits:["edit","delete","toggle"],setup($,{emit:s}){const a=$,i=s,y=v(()=>{const e=a.alert.radius_meters/1e3;return e<1?`${a.alert.radius_meters}m`:`${e}km`}),f=v(()=>{var e;return a.alert.category?((e=A.find(r=>r.value===a.alert.category))==null?void 0:e.label)||a.alert.category:""}),h=v(()=>{if(!a.alert.category)return"gray";const e=A.find(C=>C.value===a.alert.category);return e&&{"#059669":"green","#2563eb":"blue","#7c3aed":"purple"}[e.color]||"gray"}),p=v(()=>`${a.alert.location.lat.toFixed(4)}, ${a.alert.location.lng.toFixed(4)}`),b=()=>{i("toggle",a.alert)},d=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(e,r)=>(n(),c("div",L,[t("div",R,[t("div",Y,[t("h3",j,u(e.alert.name),1),t("div",G,[t("span",O,u(y.value),1),e.alert.category?(n(),c("span",U,[o(F,{label:f.value,color:h.value,size:"xs"},null,8,["label","color"])])):(n(),c("span",q,"All categories"))])]),t("div",H,[o(g,{variant:"ghost",size:"sm",onClick:b,"icon-left":e.alert.active?"tabler:bell":"tabler:bell-off",class:x({"text-gray-400":!e.alert.active})},{default:_(()=>[m(u(e.alert.active?"Active":"Inactive"),1)]),_:1},8,["icon-left","class"]),o(g,{variant:"ghost",size:"sm","icon-left":"tabler:edit",onClick:r[0]||(r[0]=C=>e.$emit("edit",e.alert))}),o(g,{variant:"ghost",size:"sm","icon-left":"tabler:trash",class:"text-red-500 hover:text-red-700",onClick:r[1]||(r[1]=C=>e.$emit("delete",e.alert))})])]),t("div",J,[o(l(k),{icon:"tabler:map-pin",class:"location-icon"}),t("span",null,u(p.value),1)]),t("div",K,[t("span",P,"Created "+u(d(e.alert.created_at)),1)])]))}}),W=D(Q,[["__scopeId","data-v-5b69748f"]]),X={class:"alerts-view"},Z={class:"alerts-container"},ee={class:"alerts-header"},te={class:"alerts-section"},se={class:"section-header"},ae={class:"section-actions"},le={class:"alert-count"},oe={key:0,class:"loading-state"},re={key:1,class:"empty-state"},ne={class:"empty-icon"},ie={key:2,class:"alerts-grid"},de={class:"modal-header"},ce={class:"modal-body"},ue={class:"modal-actions"},ge=w({__name:"AlertsView",setup($){const s=N(),a=M(),i=z(null),y=d=>{a.push({name:"alerts-update",params:{id:d.id}})},f=d=>{i.value=d},h=async d=>{try{await s.toggleAlert(d.id)}catch{}},p=()=>{i.value=null},b=async()=>{if(i.value)try{await s.deleteAlert(i.value.id),i.value=null}catch{}};return B(()=>{s.initialize()}),(d,e)=>(n(),c("div",X,[t("div",Z,[t("div",ee,[e[2]||(e[2]=t("div",{class:"header-content"},[t("h1",{class:"page-title"},"Alert Management"),t("p",{class:"page-description"}," Create location-based alerts to get notified when new listings are posted in your area. ")],-1)),o(g,{link:{name:"alerts-create"},"icon-left":"tabler:plus",class:"create-button"},{default:_(()=>e[1]||(e[1]=[m(" Create Alert ")])),_:1,__:[1]})]),t("div",te,[t("div",se,[e[3]||(e[3]=t("h2",{class:"section-title"},"Your Alerts",-1)),t("div",ae,[t("span",le,u(l(s).alerts.length)+" alert"+u(l(s).alerts.length!==1?"s":""),1)])]),l(s).loading&&l(s).alerts.length===0?(n(),c("div",oe,[o(l(k),{icon:"svg-spinners:3-dots-bounce",class:"loading-spinner"}),e[4]||(e[4]=t("p",null,"Loading your alerts...",-1))])):!l(s).loading&&l(s).alerts.length===0?(n(),c("div",re,[t("div",ne,[o(l(k),{icon:"tabler:bell-off",class:"w-16 h-16 text-gray-300"})]),e[5]||(e[5]=t("h3",{class:"empty-title"},"No alerts yet",-1)),e[6]||(e[6]=t("p",{class:"empty-description"}," Create your first alert to get notified when new listings are posted in your area. ",-1))])):(n(),c("div",ie,[(n(!0),c(I,null,S(l(s).alerts,r=>(n(),V(W,{key:r.id,alert:r,onEdit:y,onDelete:f,onToggle:h},null,8,["alert"]))),128))]))])]),i.value?(n(),c("div",{key:0,class:"modal-overlay",onClick:p},[t("div",{class:"modal-content",onClick:e[0]||(e[0]=T(()=>{},["stop"]))},[t("div",de,[e[7]||(e[7]=t("h3",{class:"modal-title"},"Delete Alert",-1)),o(g,{variant:"ghost","icon-left":"tabler:x",onClick:p,class:"modal-close"})]),t("div",ce,[t("p",null,[e[8]||(e[8]=m(' Are you sure you want to delete the alert "')),t("strong",null,u(i.value.name),1),e[9]||(e[9]=m('"? '))]),e[10]||(e[10]=t("p",{class:"text-sm text-gray-600 mt-2"}," You will no longer receive notifications for this area. This action cannot be undone. ",-1))]),t("div",ue,[o(g,{variant:"outline",onClick:p},{default:_(()=>e[11]||(e[11]=[m(" Cancel ")])),_:1,__:[11]}),o(g,{variant:"primary",onClick:b,loading:l(s).loading,class:"bg-red-600 hover:bg-red-700"},{default:_(()=>e[12]||(e[12]=[m(" Delete Alert ")])),_:1,__:[12]},8,["loading"])])])])):E("",!0)]))}}),ye=D(ge,[["__scopeId","data-v-8419c631"]]);export{ye as default};
//# sourceMappingURL=AlertsView-DgOb5DpP.js.map
