import{d as M,k as C,l as F,A as u,e as S,c as i,a as s,n as B,p as L,q as n,v as g,h as c,t as d,Q as y,F as U,C as h,j as b,I as D,B as N,w as E,g as I,o as r,_ as $}from"./index-BGnEo6Zc.js";import{C as O}from"./constants-DDm60LNs.js";import{L as R}from"./LocationSelector-B3MsbmQD.js";import{u as T}from"./location-C0Q4Qz_1.js";const j={class:"alert-form"},q=["disabled"],G={for:"alert-radius",class:"block text-sm font-medium text-gray-700 mb-2"},H=["disabled"],Q={class:"flex justify-between text-xs text-gray-500 mt-1"},Y={key:0},z={key:1},J={key:2},K={key:3},P={class:"space-y-2"},W={class:"flex items-center"},X=["disabled"],Z=["onUpdate:modelValue","value","disabled"],ee={class:"ml-2 text-sm text-gray-700"},te={key:0,class:"error-message"},se={class:"form-actions"},ae=M({__name:"AlertForm",props:{alert:{default:null},loading:{type:Boolean,default:!1},useMiles:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(v,{emit:x}){const l=v,_=x,p=T(),m=C(""),e=F({name:"",location:{lng:-118.2437,lat:34.0522},radius_meters:5e3,category:""}),k=u(()=>!!l.alert),V=u(()=>{if(l.useMiles){const a=e.radius_meters*621371e-9;return a<1?`${Math.round(e.radius_meters*3.28084)}ft`:`${a.toFixed(1)}mi`}else{const a=e.radius_meters/1e3;return a<1?`${e.radius_meters}m`:`${a.toFixed(1)}km`}}),f=u(()=>e.name.trim().length>0&&e.location.lat!==0&&e.location.lng!==0&&e.radius_meters>=500&&e.radius_meters<=5e4),A=()=>{if(!f.value)return;m.value="";const a={name:e.name.trim(),location:e.location,radius_meters:e.radius_meters,category:e.category||void 0};_("submit",a)};return S(async()=>{l.alert?(e.name=l.alert.name,e.location={...l.alert.location},e.radius_meters=l.alert.radius_meters,e.category=l.alert.category||""):p.creationLocation&&(e.location={...p.creationLocation})}),(a,t)=>(r(),i("div",j,[s("form",{onSubmit:B(A,["prevent"]),class:"space-y-6"},[s("div",null,[t[4]||(t[4]=s("label",{for:"alert-name",class:"block text-sm font-medium text-gray-700 mb-2"}," Alert Name ",-1)),n(s("input",{id:"alert-name","onUpdate:modelValue":t[0]||(t[0]=o=>e.name=o),type:"text",required:"",placeholder:"e.g. 'Downtown alerts' or 'Help needed in my area'",class:"input",disabled:a.loading},null,8,q),[[g,e.name]]),t[5]||(t[5]=s("p",{class:"mt-1 text-sm text-gray-500"}," Give your alert a descriptive name to help you identify it later. ",-1))]),s("div",null,[t[6]||(t[6]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Location ",-1)),c(R,{modelValue:e.location,"onUpdate:modelValue":t[1]||(t[1]=o=>e.location=o),disabled:a.loading,class:"mb-2"},null,8,["modelValue","disabled"]),t[7]||(t[7]=s("p",{class:"text-sm text-gray-500"},"Set the center point for your alert area.",-1))]),s("div",null,[s("label",G," Alert Radius: "+d(V.value),1),n(s("input",{id:"alert-radius","onUpdate:modelValue":t[2]||(t[2]=o=>e.radius_meters=o),type:"range",min:"500",max:"50000",step:"500",class:"slider",disabled:a.loading},null,8,H),[[g,e.radius_meters,void 0,{number:!0}]]),s("div",Q,[l.useMiles?(r(),i("span",Y,"1640ft")):(r(),i("span",z,"500m")),l.useMiles?(r(),i("span",J,"31mi")):(r(),i("span",K,"50km"))]),t[8]||(t[8]=s("p",{class:"mt-1 text-sm text-gray-500"}," You'll be notified about new listings within this distance from your location. ",-1))]),s("div",null,[t[10]||(t[10]=s("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Category Filter (Optional) ",-1)),s("div",P,[s("label",W,[n(s("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>e.category=o),type:"radio",value:"",class:"radio",disabled:a.loading},null,8,X),[[y,e.category]]),t[9]||(t[9]=s("span",{class:"ml-2 text-sm text-gray-700"},"All categories",-1))]),(r(!0),i(U,null,h(b(O),o=>(r(),i("label",{key:o.value,class:"flex items-center"},[n(s("input",{"onUpdate:modelValue":w=>e.category=w,type:"radio",value:o.value,class:"radio",disabled:a.loading},null,8,Z),[[y,e.category]]),s("span",ee,d(o.label),1)]))),128))]),t[11]||(t[11]=s("p",{class:"mt-1 text-sm text-gray-500"}," Only get notified about listings in specific categories, or leave unselected for all. ",-1))]),m.value?(r(),i("div",te,[c(b(D),{icon:"tabler:alert-triangle",class:"error-icon"}),s("span",null,d(m.value),1)])):L("",!0),s("div",se,[c(N,{loading:a.loading,disabled:!f.value},{default:E(()=>[I(d(k.value?"Update Alert":"Create Alert"),1)]),_:1},8,["loading","disabled"])])],32)]))}}),ne=$(ae,[["__scopeId","data-v-b08f5652"]]);export{ne as A};
//# sourceMappingURL=AlertForm-BRSOu7BT.js.map
