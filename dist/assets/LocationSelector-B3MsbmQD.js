import{M as k}from"./Map-aIQ7w-tr.js";import{_ as x,L as d}from"./Text.vue_vue_type_script_setup_true_lang-CxVtjZvh.js";import{d as C,k as r,A as L,H as S,c as p,a as c,p as w,h as i,B as z,w as B,t as A,g as G,o as v,_ as M}from"./index-BGnEo6Zc.js";const N={class:"location-selector"},E={class:"address-input"},I={class:"map-picker"},P={key:0,class:"mt-2 text-red-600 text-sm"},R=C({__name:"LocationSelector",props:{modelValue:{},zoom:{default:13}},emits:["update:modelValue"],setup(f,{emit:g}){const t=f,u=g,o=r(""),s=r(t.modelValue||{lat:34.0522,lng:-118.2437}),n=r(!1),l=r(""),_=L(()=>[{...s.value,color:"#d45f0d"}]),V=async e=>{s.value=e,u("update:modelValue",e);try{const a=await d.reverseGeocode(e.lat,e.lng);o.value=a,l.value=""}catch(a){console.error("Reverse geocoding failed:",a)}},m=async()=>{if(o.value.trim()){n.value=!0,l.value="";try{const e=await d.geocodeAddress(o.value),a={lat:e.latitude,lng:e.longitude};s.value=a,u("update:modelValue",a)}catch(e){console.error("Geocoding failed:",e),l.value="Could not find the specified location. Please try a different address."}finally{n.value=!1}}},h=async()=>{if(t.modelValue)try{const e=await d.reverseGeocode(t.modelValue.lat,t.modelValue.lng);o.value=e}catch(e){console.error("Reverse geocoding failed on init:",e)}};return S(()=>t.modelValue,e=>{e&&(s.value=e,h())},{immediate:!0}),(e,a)=>(v(),p("div",N,[c("div",E,[i(x,{modelValue:o.value,"onUpdate:modelValue":a[0]||(a[0]=y=>o.value=y),placeholder:"Type an address or location...",onEnter:m},null,8,["modelValue"]),i(z,{variant:"gray",onClick:m,loading:n.value,class:"ml-4"},{default:B(()=>a[1]||(a[1]=[G(" Search ")])),_:1,__:[1]},8,["loading"])]),c("div",I,[i(k,{center:s.value,zoom:e.zoom,pins:_.value,onMapClick:V},null,8,["center","zoom","pins"])]),a[2]||(a[2]=c("p",{class:"mt-2 text-sm text-gray-500"}," Click on the map to select a location or search for an address above. ",-1)),l.value?(v(),p("div",P,A(l.value),1)):w("",!0)]))}}),H=M(R,[["__scopeId","data-v-478729f0"]]);export{H as L};
//# sourceMappingURL=LocationSelector-B3MsbmQD.js.map
