import{d as x,A as p,c as d,a as e,t as u,h as n,w as _,g as m,E as B,B as g,j as r,I as $,o as i,_ as z,k,s as E,e as I,p as S,F as T,C as V,n as F,i as M}from"./index-Cwfaiojx.js";import{useAlertsStore as N}from"./alerts-C5XLbTOi.js";import{C as D}from"./constants-DDm60LNs.js";import{_ as L}from"./Chip.vue_vue_type_script_setup_true_lang-CN88rGI7.js";const R={class:"alert-card"},Y={class:"alert-header"},j={class:"alert-info"},G={class:"alert-name"},O={class:"alert-details"},U={class:"alert-radius"},q={key:0,class:"alert-category"},H={key:1,class:"alert-category-all"},J={class:"alert-actions"},K={class:"alert-location"},P={class:"alert-meta"},Q={class:"alert-date"},W=x({__name:"AlertCard",props:{alert:{}},emits:["edit","delete","toggle"],setup(A,{emit:l}){const o=A,y=l,f=p(()=>{const s=o.alert.radius_meters/1e3;return s<1?`${o.alert.radius_meters}m`:`${s}km`}),c=p(()=>{var s;return o.alert.category?((s=D.find(a=>a.value===o.alert.category))==null?void 0:s.label)||o.alert.category:""}),h=p(()=>{if(!o.alert.category)return"gray";const s=D.find(t=>t.value===o.alert.category);return s&&{"#059669":"green","#2563eb":"blue","#7c3aed":"purple"}[s.color]||"gray"}),b=p(()=>`${o.alert.location.lat.toFixed(4)}, ${o.alert.location.lng.toFixed(4)}`),C=()=>{y("toggle",o.alert)},v=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return(s,a)=>(i(),d("div",R,[e("div",Y,[e("div",j,[e("h3",G,u(s.alert.name),1),e("div",O,[e("span",U,u(f.value),1),s.alert.category?(i(),d("span",q,[n(L,{label:c.value,color:h.value,size:"xs"},null,8,["label","color"])])):(i(),d("span",H,"All categories"))])]),e("div",J,[n(g,{variant:"ghost",size:"sm",onClick:C,"icon-left":s.alert.active?"tabler:bell":"tabler:bell-off",class:B({"text-gray-400":!s.alert.active})},{default:_(()=>[m(u(s.alert.active?"Active":"Inactive"),1)]),_:1},8,["icon-left","class"]),n(g,{variant:"ghost",size:"sm","icon-left":"tabler:edit",onClick:a[0]||(a[0]=t=>s.$emit("edit",s.alert))}),n(g,{variant:"ghost",size:"sm","icon-left":"tabler:trash",class:"text-red-500 hover:text-red-700",onClick:a[1]||(a[1]=t=>s.$emit("delete",s.alert))})])]),e("div",K,[n(r($),{icon:"tabler:map-pin",class:"location-icon"}),e("span",null,u(b.value),1)]),e("div",P,[e("span",Q,"Created "+u(v(s.alert.created_at)),1)])]))}}),X=z(W,[["__scopeId","data-v-5b69748f"]]),Z={class:"alerts-view"},ee={class:"alerts-container"},te={class:"alerts-header"},se={class:"alerts-section"},ae={class:"section-header"},le={class:"section-actions"},oe={class:"alert-count"},re={key:0,class:"loading-state"},ne={key:1,class:"empty-state"},ie={class:"empty-icon"},ce={key:2,class:"alerts-grid"},de={class:"modal-header"},ue={class:"modal-body"},ge={class:"modal-actions"},me=x({__name:"AlertsView",setup(A){const l=N(),o=E(),y=k(!!o.params.create),f=k(null),c=k(null),h=a=>{f.value=a,y.value=!1},b=a=>{c.value=a},C=async a=>{try{await l.toggleAlert(a.id)}catch{}},v=()=>{c.value=null},s=async()=>{if(c.value)try{await l.deleteAlert(c.value.id),c.value=null}catch{}};return I(()=>{l.initialize()}),(a,t)=>(i(),d("div",Z,[e("div",ee,[e("div",te,[t[2]||(t[2]=e("div",{class:"header-content"},[e("h1",{class:"page-title"},"Alert Management"),e("p",{class:"page-description"}," Create location-based alerts to get notified when new listings are posted in your area. ")],-1)),n(g,{link:{name:"alerts-create"},"icon-left":"tabler:plus",class:"create-button"},{default:_(()=>t[1]||(t[1]=[m(" Create Alert ")])),_:1,__:[1]})]),e("div",se,[e("div",ae,[t[3]||(t[3]=e("h2",{class:"section-title"},"Your Alerts",-1)),e("div",le,[e("span",oe,u(r(l).alerts.length)+" alert"+u(r(l).alerts.length!==1?"s":""),1)])]),r(l).loading&&r(l).alerts.length===0?(i(),d("div",re,[n(r($),{icon:"svg-spinners:3-dots-bounce",class:"loading-spinner"}),t[4]||(t[4]=e("p",null,"Loading your alerts...",-1))])):!r(l).loading&&r(l).alerts.length===0?(i(),d("div",ne,[e("div",ie,[n(r($),{icon:"tabler:bell-off",class:"w-16 h-16 text-gray-300"})]),t[5]||(t[5]=e("h3",{class:"empty-title"},"No alerts yet",-1)),t[6]||(t[6]=e("p",{class:"empty-description"}," Create your first alert to get notified when new listings are posted in your area. ",-1))])):(i(),d("div",ce,[(i(!0),d(T,null,V(r(l).alerts,w=>(i(),M(X,{key:w.id,alert:w,onEdit:h,onDelete:b,onToggle:C},null,8,["alert"]))),128))]))])]),c.value?(i(),d("div",{key:0,class:"modal-overlay",onClick:v},[e("div",{class:"modal-content",onClick:t[0]||(t[0]=F(()=>{},["stop"]))},[e("div",de,[t[7]||(t[7]=e("h3",{class:"modal-title"},"Delete Alert",-1)),n(g,{variant:"ghost","icon-left":"tabler:x",onClick:v,class:"modal-close"})]),e("div",ue,[e("p",null,[t[8]||(t[8]=m(' Are you sure you want to delete the alert "')),e("strong",null,u(c.value.name),1),t[9]||(t[9]=m('"? '))]),t[10]||(t[10]=e("p",{class:"text-sm text-gray-600 mt-2"}," You will no longer receive notifications for this area. This action cannot be undone. ",-1))]),e("div",ge,[n(g,{variant:"outline",onClick:v},{default:_(()=>t[11]||(t[11]=[m(" Cancel ")])),_:1,__:[11]}),n(g,{variant:"primary",onClick:s,loading:r(l).loading,class:"bg-red-600 hover:bg-red-700"},{default:_(()=>t[12]||(t[12]=[m(" Delete Alert ")])),_:1,__:[12]},8,["loading"])])])])):S("",!0)]))}}),fe=z(me,[["__scopeId","data-v-6115f378"]]);export{fe as default};
//# sourceMappingURL=AlertsView-Dnw1e2Yg.js.map
