{"version":3,"file":"AlertsView-DgOb5DpP.js","sources":["../../src/components/alerts/AlertCard.vue","../../src/views/AlertsView.vue"],"sourcesContent":["<template>\n  <div class=\"alert-card\">\n    <div class=\"alert-header\">\n      <div class=\"alert-info\">\n        <h3 class=\"alert-name\">{{ alert.name }}</h3>\n        <div class=\"alert-details\">\n          <span class=\"alert-radius\">{{ radiusDisplay }}</span>\n          <span v-if=\"alert.category\" class=\"alert-category\">\n            <Chip :label=\"categoryLabel\" :color=\"categoryColor\" size=\"xs\" />\n          </span>\n          <span v-else class=\"alert-category-all\">All categories</span>\n        </div>\n      </div>\n      <div class=\"alert-actions\">\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          @click=\"toggleActive\"\n          :icon-left=\"alert.active ? 'tabler:bell' : 'tabler:bell-off'\"\n          :class=\"{ 'text-gray-400': !alert.active }\"\n        >\n          {{ alert.active ? 'Active' : 'Inactive' }}\n        </Button>\n        <Button variant=\"ghost\" size=\"sm\" icon-left=\"tabler:edit\" @click=\"$emit('edit', alert)\" />\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          icon-left=\"tabler:trash\"\n          class=\"text-red-500 hover:text-red-700\"\n          @click=\"$emit('delete', alert)\"\n        />\n      </div>\n    </div>\n\n    <div class=\"alert-location\">\n      <Icon icon=\"tabler:map-pin\" class=\"location-icon\" />\n      <span>{{ locationDisplay }}</span>\n    </div>\n\n    <div class=\"alert-meta\">\n      <span class=\"alert-date\">Created {{ formatDate(alert.created_at) }}</span>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n  import { computed } from 'vue'\n  import { Icon } from '@iconify/vue'\n  import type { Alert, RequestCategory } from '@/types'\n  import { CATEGORIES } from '@/constants'\n  import Button from '@/components/widgets/Button.vue'\n  import Chip from '@/components/widgets/Chip.vue'\n\n  interface Props {\n    alert: Alert\n  }\n\n  interface Emits {\n    (e: 'edit', alert: Alert): void\n    (e: 'delete', alert: Alert): void\n    (e: 'toggle', alert: Alert): void\n  }\n\n  const props = defineProps<Props>()\n  const emit = defineEmits<Emits>()\n\n  const radiusDisplay = computed(() => {\n    const km = props.alert.radius_meters / 1000\n    return km < 1 ? `${props.alert.radius_meters}m` : `${km}km`\n  })\n\n  const categoryLabel = computed(() => {\n    if (!props.alert.category) return ''\n    return CATEGORIES.find(cat => cat.value === props.alert.category)?.label || props.alert.category\n  })\n\n  const categoryColor = computed(() => {\n    if (!props.alert.category) return 'gray'\n    const category = CATEGORIES.find(cat => cat.value === props.alert.category)\n    if (!category) return 'gray'\n\n    // Map category colors to chip colors\n    const colorMap: Record<string, string> = {\n      '#059669': 'green',\n      '#2563eb': 'blue',\n      '#7c3aed': 'purple',\n    }\n    return colorMap[category.color] || 'gray'\n  })\n\n  const locationDisplay = computed(() => {\n    return `${props.alert.location.lat.toFixed(4)}, ${props.alert.location.lng.toFixed(4)}`\n  })\n\n  const toggleActive = () => {\n    emit('toggle', props.alert)\n  }\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('en-US', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n    })\n  }\n</script>\n\n<style scoped>\n  .alert-card {\n    @apply bg-white border border-gray-200 rounded-lg p-4 space-y-3;\n    @apply hover:shadow-md transition-shadow;\n  }\n\n  .alert-header {\n    @apply flex items-start justify-between;\n  }\n\n  .alert-info {\n    @apply flex-1;\n  }\n\n  .alert-name {\n    @apply text-lg font-semibold text-gray-900 mb-1;\n  }\n\n  .alert-details {\n    @apply flex items-center gap-3 text-sm text-gray-600;\n  }\n\n  .alert-radius {\n    @apply font-medium;\n  }\n\n  .alert-category-all {\n    @apply text-gray-500 italic;\n  }\n\n  .alert-actions {\n    @apply flex items-center gap-1;\n  }\n\n  .alert-location {\n    @apply flex items-center gap-2 text-sm text-gray-600;\n  }\n\n  .location-icon {\n    @apply w-4 h-4 text-gray-400;\n  }\n\n  .alert-meta {\n    @apply text-xs text-gray-500;\n  }\n\n  .alert-date {\n    @apply block;\n  }\n</style>\n","<template>\n  <div class=\"alerts-view\">\n    <div class=\"alerts-container\">\n      <!-- Header -->\n      <div class=\"alerts-header\">\n        <div class=\"header-content\">\n          <h1 class=\"page-title\">Alert Management</h1>\n          <p class=\"page-description\">\n            Create location-based alerts to get notified when new listings are posted in your area.\n          </p>\n        </div>\n        <Button :link=\"{ name: 'alerts-create' }\" icon-left=\"tabler:plus\" class=\"create-button\">\n          Create Alert\n        </Button>\n      </div>\n\n      <!-- Alerts List -->\n      <div class=\"alerts-section\">\n        <div class=\"section-header\">\n          <h2 class=\"section-title\">Your Alerts</h2>\n          <div class=\"section-actions\">\n            <span class=\"alert-count\">\n              {{ alertsStore.alerts.length }} alert{{ alertsStore.alerts.length !== 1 ? 's' : '' }}\n            </span>\n          </div>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"alertsStore.loading && alertsStore.alerts.length === 0\" class=\"loading-state\">\n          <Icon icon=\"svg-spinners:3-dots-bounce\" class=\"loading-spinner\" />\n          <p>Loading your alerts...</p>\n        </div>\n\n        <!-- Empty State -->\n        <div\n          v-else-if=\"!alertsStore.loading && alertsStore.alerts.length === 0\"\n          class=\"empty-state\"\n        >\n          <div class=\"empty-icon\">\n            <Icon icon=\"tabler:bell-off\" class=\"w-16 h-16 text-gray-300\" />\n          </div>\n          <h3 class=\"empty-title\">No alerts yet</h3>\n          <p class=\"empty-description\">\n            Create your first alert to get notified when new listings are posted in your area.\n          </p>\n        </div>\n\n        <!-- Alerts Grid -->\n        <div v-else class=\"alerts-grid\">\n          <AlertCard\n            v-for=\"alert in alertsStore.alerts\"\n            :key=\"alert.id\"\n            :alert=\"alert\"\n            @edit=\"handleEdit\"\n            @delete=\"handleDelete\"\n            @toggle=\"handleToggle\"\n          />\n        </div>\n      </div>\n    </div>\n\n    <!-- Delete Confirmation Modal -->\n    <div v-if=\"alertToDelete\" class=\"modal-overlay\" @click=\"cancelDelete\">\n      <div class=\"modal-content\" @click.stop>\n        <div class=\"modal-header\">\n          <h3 class=\"modal-title\">Delete Alert</h3>\n          <Button variant=\"ghost\" icon-left=\"tabler:x\" @click=\"cancelDelete\" class=\"modal-close\" />\n        </div>\n        <div class=\"modal-body\">\n          <p>\n            Are you sure you want to delete the alert \"<strong>{{ alertToDelete.name }}</strong\n            >\"?\n          </p>\n          <p class=\"text-sm text-gray-600 mt-2\">\n            You will no longer receive notifications for this area. This action cannot be undone.\n          </p>\n        </div>\n        <div class=\"modal-actions\">\n          <Button variant=\"outline\" @click=\"cancelDelete\"> Cancel </Button>\n          <Button\n            variant=\"primary\"\n            @click=\"confirmDelete\"\n            :loading=\"alertsStore.loading\"\n            class=\"bg-red-600 hover:bg-red-700\"\n          >\n            Delete Alert\n          </Button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n  import { ref, onMounted } from 'vue'\n  import { Icon } from '@iconify/vue'\n  import type { Alert } from '@/types'\n  import { useAlertsStore } from '@/stores/alerts'\n  import AlertCard from '@/components/alerts/AlertCard.vue'\n  import Button from '@/components/widgets/Button.vue'\n  import { useRouter } from 'vue-router'\n\n  const alertsStore = useAlertsStore()\n  const router = useRouter()\n\n  const alertToDelete = ref<Alert | null>(null)\n\n  const handleEdit = (alert: Alert) => {\n    router.push({ name: 'alerts-update', params: { id: alert.id } })\n  }\n\n  const handleDelete = (alert: Alert) => {\n    alertToDelete.value = alert\n  }\n\n  const handleToggle = async (alert: Alert) => {\n    try {\n      await alertsStore.toggleAlert(alert.id)\n    } catch (error) {\n      // Error is handled by the store\n    }\n  }\n\n  const cancelDelete = () => {\n    alertToDelete.value = null\n  }\n\n  const confirmDelete = async () => {\n    if (!alertToDelete.value) return\n\n    try {\n      await alertsStore.deleteAlert(alertToDelete.value.id)\n      alertToDelete.value = null\n    } catch (error) {\n      // Error is handled by the store\n    }\n  }\n\n  onMounted(() => {\n    alertsStore.initialize()\n  })\n</script>\n\n<style scoped>\n  .alerts-view {\n    @apply min-h-screen bg-gray-50 py-8;\n  }\n\n  .alerts-container {\n    @apply max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 space-y-8;\n  }\n\n  .alerts-header {\n    @apply flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4;\n  }\n\n  .header-content {\n    @apply flex-1;\n  }\n\n  .page-title {\n    @apply text-3xl font-bold text-gray-900 mb-2;\n  }\n\n  .page-description {\n    @apply text-gray-600 max-w-2xl;\n  }\n\n  .create-button {\n    @apply sm:flex-shrink-0;\n  }\n\n  .error-banner {\n    @apply flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg;\n    @apply text-red-700;\n  }\n\n  .error-icon {\n    @apply w-5 h-5 text-red-500 flex-shrink-0;\n  }\n\n  .error-close {\n    @apply ml-auto text-red-600 hover:text-red-800;\n  }\n\n  .alerts-section {\n    @apply space-y-6;\n  }\n\n  .section-header {\n    @apply flex items-center justify-between;\n  }\n\n  .section-title {\n    @apply text-2xl font-semibold text-gray-900;\n  }\n\n  .section-actions {\n    @apply flex items-center gap-4;\n  }\n\n  .alert-count {\n    @apply text-sm text-gray-600;\n  }\n\n  .loading-state {\n    @apply flex flex-col items-center justify-center py-12 text-gray-500;\n  }\n\n  .loading-spinner {\n    @apply w-8 h-8 mb-4;\n  }\n\n  .empty-state {\n    @apply text-center py-12;\n  }\n\n  .empty-icon {\n    @apply flex justify-center mb-4;\n  }\n\n  .empty-title {\n    @apply text-xl font-semibold text-gray-900 mb-2;\n  }\n\n  .empty-description {\n    @apply text-gray-600 max-w-md mx-auto;\n  }\n\n  .alerts-grid {\n    @apply grid gap-4 md:grid-cols-2 lg:grid-cols-3;\n  }\n\n  .modal-overlay {\n    @apply fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4;\n  }\n\n  .modal-content {\n    @apply bg-white rounded-lg shadow-xl max-w-md w-full;\n  }\n\n  .modal-header {\n    @apply flex items-center justify-between p-6 border-b border-gray-200;\n  }\n\n  .modal-title {\n    @apply text-lg font-semibold text-gray-900;\n  }\n\n  .modal-close {\n    @apply text-gray-400 hover:text-gray-600;\n  }\n\n  .modal-body {\n    @apply p-6;\n  }\n\n  .modal-actions {\n    @apply flex gap-3 p-6 border-t border-gray-200;\n  }\n</style>\n"],"names":["props","__props","emit","__emit","radiusDisplay","computed","km","categoryLabel","_a","CATEGORIES","cat","categoryColor","category","locationDisplay","toggleActive","formatDate","dateString","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","alert","_hoisted_5","_hoisted_6","_toDisplayString","_hoisted_7","_createVNode","Chip","_hoisted_8","_hoisted_9","Button","_normalizeClass","_cache","$event","$emit","_hoisted_10","_unref","Icon","_hoisted_11","_hoisted_12","alertsStore","useAlertsStore","router","useRouter","alertToDelete","ref","handleEdit","handleDelete","handleToggle","cancelDelete","confirmDelete","onMounted","_Fragment","_renderList","_createBlock","AlertCard","_hoisted_13","_hoisted_14"],"mappings":"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"}