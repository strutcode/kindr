{"version":3,"file":"AlertCreateView-Ct4JZ933.js","sources":["../../src/components/alerts/AlertForm.vue","../../src/views/AlertCreateView.vue"],"sourcesContent":["<template>\n  <div class=\"alert-form\">\n    <form @submit.prevent=\"handleSubmit\" class=\"space-y-6\">\n      <!-- Alert Name -->\n      <div>\n        <label for=\"alert-name\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Alert Name\n        </label>\n        <input\n          id=\"alert-name\"\n          v-model=\"form.name\"\n          type=\"text\"\n          required\n          placeholder=\"e.g. 'Downtown alerts' or 'Help needed in my area'\"\n          class=\"input\"\n          :disabled=\"loading\"\n        />\n        <p class=\"mt-1 text-sm text-gray-500\">\n          Give your alert a descriptive name to help you identify it later.\n        </p>\n      </div>\n\n      <!-- Location -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\"> Location </label>\n        <LocationSelector v-model=\"form.location\" :disabled=\"loading\" class=\"mb-2\" />\n        <p class=\"text-sm text-gray-500\">Set the center point for your alert area.</p>\n      </div>\n\n      <!-- Radius -->\n      <div>\n        <label for=\"alert-radius\" class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Alert Radius: {{ radiusDisplay }}\n        </label>\n        <input\n          id=\"alert-radius\"\n          v-model.number=\"form.radius_meters\"\n          type=\"range\"\n          min=\"500\"\n          max=\"50000\"\n          step=\"500\"\n          class=\"slider\"\n          :disabled=\"loading\"\n        />\n        <div class=\"flex justify-between text-xs text-gray-500 mt-1\">\n          <span>500m</span>\n          <span>50km</span>\n        </div>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          You'll be notified about new listings within this distance from your location.\n        </p>\n      </div>\n\n      <!-- Category Filter -->\n      <div>\n        <label class=\"block text-sm font-medium text-gray-700 mb-2\">\n          Category Filter (Optional)\n        </label>\n        <div class=\"space-y-2\">\n          <label class=\"flex items-center\">\n            <input\n              v-model=\"form.category\"\n              type=\"radio\"\n              value=\"\"\n              class=\"radio\"\n              :disabled=\"loading\"\n            />\n            <span class=\"ml-2 text-sm text-gray-700\">All categories</span>\n          </label>\n          <label v-for=\"category in CATEGORIES\" :key=\"category.value\" class=\"flex items-center\">\n            <input\n              v-model=\"form.category\"\n              type=\"radio\"\n              :value=\"category.value\"\n              class=\"radio\"\n              :disabled=\"loading\"\n            />\n            <span class=\"ml-2 text-sm text-gray-700\">{{ category.label }}</span>\n          </label>\n        </div>\n        <p class=\"mt-1 text-sm text-gray-500\">\n          Only get notified about listings in specific categories, or leave unselected for all.\n        </p>\n      </div>\n\n      <!-- Error Message -->\n      <div v-if=\"error\" class=\"error-message\">\n        <Icon icon=\"tabler:alert-triangle\" class=\"error-icon\" />\n        <span>{{ error }}</span>\n      </div>\n\n      <!-- Form Actions -->\n      <div class=\"form-actions\">\n        <Button :loading=\"loading\" :disabled=\"!isFormValid\">\n          {{ isEditing ? 'Update Alert' : 'Create Alert' }}\n        </Button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n  import { ref, reactive, computed, onMounted } from 'vue'\n  import { Icon } from '@iconify/vue'\n  import type { Alert, Location } from '@/types'\n  import { CATEGORIES } from '@/constants'\n  import Button from '@/components/widgets/Button.vue'\n  import LocationSelector from '@/components/widgets/LocationSelector.vue'\n  import { useLocationStore } from '@/stores/location'\n\n  interface Props {\n    alert?: Alert | null\n    loading?: boolean\n  }\n\n  interface Emits {\n    (\n      e: 'submit',\n      data: {\n        name: string\n        location: Location\n        radius_meters: number\n        category?: string\n      },\n    ): void\n    (e: 'cancel'): void\n  }\n\n  const props = withDefaults(defineProps<Props>(), {\n    alert: null,\n    loading: false,\n  })\n\n  const emit = defineEmits<Emits>()\n  const locationStore = useLocationStore()\n\n  const error = ref('')\n\n  const form = reactive({\n    name: '',\n    location: { lat: 0, lng: 0 } as Location,\n    radius_meters: 5000, // Default 5km\n    category: '', // Empty string means all categories\n  })\n\n  const isEditing = computed(() => !!props.alert)\n\n  const radiusDisplay = computed(() => {\n    const km = form.radius_meters / 1000\n    return km < 1 ? `${form.radius_meters}m` : `${km.toFixed(1)}km`\n  })\n\n  const isFormValid = computed(() => {\n    return (\n      form.name.trim().length > 0 &&\n      form.location.lat !== 0 &&\n      form.location.lng !== 0 &&\n      form.radius_meters >= 500 &&\n      form.radius_meters <= 50000\n    )\n  })\n\n  const handleSubmit = () => {\n    if (!isFormValid.value) return\n\n    error.value = ''\n\n    const submitData = {\n      name: form.name.trim(),\n      location: form.location,\n      radius_meters: form.radius_meters,\n      category: form.category || undefined,\n    }\n\n    emit('submit', submitData)\n  }\n\n  // Initialize form data\n  onMounted(async () => {\n    if (props.alert) {\n      // Editing existing alert\n      form.name = props.alert.name\n      form.location = { ...props.alert.location }\n      form.radius_meters = props.alert.radius_meters\n      form.category = props.alert.category || ''\n    } else {\n      // Creating new alert - use current location if available\n      if (locationStore.creationLocation) {\n        form.location = { ...locationStore.creationLocation }\n      }\n    }\n  })\n</script>\n\n<style scoped>\n  .alert-form {\n    @apply bg-white rounded-lg border border-gray-200 p-6;\n  }\n\n  .input {\n    @apply w-full px-3 py-2 border border-gray-300 rounded-md;\n    @apply focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent;\n    @apply disabled:bg-gray-100 disabled:cursor-not-allowed;\n  }\n\n  .slider {\n    @apply w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer;\n    @apply disabled:cursor-not-allowed disabled:opacity-50;\n  }\n\n  .slider::-webkit-slider-thumb {\n    @apply appearance-none w-4 h-4 bg-blue-500 rounded-full cursor-pointer;\n    @apply hover:bg-blue-600 transition-colors;\n  }\n\n  .slider::-moz-range-thumb {\n    @apply w-4 h-4 bg-blue-500 rounded-full cursor-pointer border-0;\n    @apply hover:bg-blue-600 transition-colors;\n  }\n\n  .radio {\n    @apply w-4 h-4 text-blue-600 border-gray-300;\n    @apply focus:ring-blue-500 focus:ring-2;\n  }\n\n  .error-message {\n    @apply flex items-center gap-2 p-3 bg-red-50 border border-red-200 rounded-md;\n    @apply text-red-700 text-sm;\n  }\n\n  .error-icon {\n    @apply w-5 h-5 text-red-500 flex-shrink-0;\n  }\n\n  .form-actions {\n    @apply flex gap-3 pt-4 border-t border-gray-200;\n  }\n</style>\n","<template>\n  <div>\n    <div class=\"form-section\">\n      <div class=\"form-header\">\n        <Button variant=\"ghost\" :link=\"{ name: 'alerts' }\" class=\"hover:bg-gray-100 mr-3\">\n          <Icon icon=\"tabler:chevron-left\" class=\"w-6 h-6 text-gray-500\" />\n        </Button>\n        <h2 class=\"form-title grow\">Create New Alert</h2>\n      </div>\n      <AlertForm :loading=\"alertsStore.loading\" @submit=\"handleSubmit\" />\n    </div>\n\n    <!-- Error Message -->\n    <div v-if=\"alertsStore.error\" class=\"error-banner\">\n      <Icon icon=\"tabler:alert-triangle\" class=\"error-icon\" />\n      <span>{{ alertsStore.error }}</span>\n      <Button\n        variant=\"ghost\"\n        size=\"sm\"\n        icon-left=\"tabler:x\"\n        @click=\"alertsStore.clearError\"\n        class=\"error-close\"\n      />\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\n  import { onMounted } from 'vue'\n  import { Icon } from '@iconify/vue'\n  import { useAlertsStore } from '@/stores/alerts'\n  import AlertForm from '@/components/alerts/AlertForm.vue'\n  import Button from '@/components/widgets/Button.vue'\n\n  const alertsStore = useAlertsStore()\n\n  const handleSubmit = async (data: any) => {\n    try {\n      await alertsStore.createAlert(data)\n    } catch (error) {\n      // Error is handled by the store\n    }\n  }\n\n  onMounted(() => {\n    // Reset any previous error when the component mounts\n    alertsStore.clearError()\n  })\n</script>\n\n<style scoped>\n  .form-section {\n    @apply bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden;\n  }\n\n  .form-header {\n    @apply flex items-center justify-between p-6 border-b border-gray-200;\n  }\n\n  .form-title {\n    @apply text-xl font-semibold text-gray-900;\n  }\n\n  .close-button {\n    @apply text-gray-400 hover:text-gray-600;\n  }\n\n  .error-banner {\n    @apply flex items-center gap-3 p-4 bg-red-50 border border-red-200 rounded-lg;\n    @apply text-red-700;\n  }\n\n  .error-icon {\n    @apply w-5 h-5 text-red-500 flex-shrink-0;\n  }\n\n  .error-close {\n    @apply ml-auto text-red-600 hover:text-red-800;\n  }\n\n  .alerts-section {\n    @apply space-y-6;\n  }\n\n  .section-header {\n    @apply flex items-center justify-between;\n  }\n\n  .section-title {\n    @apply text-2xl font-semibold text-gray-900;\n  }\n\n  .section-actions {\n    @apply flex items-center gap-4;\n  }\n</style>\n"],"names":["props","__props","emit","__emit","locationStore","useLocationStore","error","ref","form","reactive","isEditing","computed","radiusDisplay","km","isFormValid","handleSubmit","submitData","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_cache","$event","loading","_vModelText","_createVNode","LocationSelector","_hoisted_3","_hoisted_5","_hoisted_6","_vModelRadio","_Fragment","_renderList","_unref","CATEGORIES","category","_hoisted_9","_toDisplayString","_hoisted_10","Icon","_hoisted_11","Button","alertsStore","useAlertsStore","data","_hoisted_2","AlertForm"],"mappings":"q7BAgIE,MAAMA,EAAQC,EAKRC,EAAOC,EACPC,EAAgBC,EAAiB,EAEjCC,EAAQC,EAAI,EAAE,EAEdC,EAAOC,EAAS,CACpB,KAAM,GACN,SAAU,CAAE,IAAK,EAAG,IAAK,CAAE,EAC3B,cAAe,IACf,SAAU,EAAA,CACX,EAEKC,EAAYC,EAAS,IAAM,CAAC,CAACX,EAAM,KAAK,EAExCY,EAAgBD,EAAS,IAAM,CAC7B,MAAAE,EAAKL,EAAK,cAAgB,IACzB,OAAAK,EAAK,EAAI,GAAGL,EAAK,aAAa,IAAM,GAAGK,EAAG,QAAQ,CAAC,CAAC,IAAA,CAC5D,EAEKC,EAAcH,EAAS,IAEzBH,EAAK,KAAK,OAAO,OAAS,GAC1BA,EAAK,SAAS,MAAQ,GACtBA,EAAK,SAAS,MAAQ,GACtBA,EAAK,eAAiB,KACtBA,EAAK,eAAiB,GAEzB,EAEKO,EAAe,IAAM,CACrB,GAAA,CAACD,EAAY,MAAO,OAExBR,EAAM,MAAQ,GAEd,MAAMU,EAAa,CACjB,KAAMR,EAAK,KAAK,KAAK,EACrB,SAAUA,EAAK,SACf,cAAeA,EAAK,cACpB,SAAUA,EAAK,UAAY,MAC7B,EAEAN,EAAK,SAAUc,CAAU,CAC3B,EAGA,OAAAC,EAAU,SAAY,CAChBjB,EAAM,OAEHQ,EAAA,KAAOR,EAAM,MAAM,KACxBQ,EAAK,SAAW,CAAE,GAAGR,EAAM,MAAM,QAAS,EACrCQ,EAAA,cAAgBR,EAAM,MAAM,cAC5BQ,EAAA,SAAWR,EAAM,MAAM,UAAY,IAGpCI,EAAc,mBAChBI,EAAK,SAAW,CAAE,GAAGJ,EAAc,gBAAiB,EAExD,CACD,UA9LDc,EAAA,EAAAC,EAiGM,MAjGNC,EAiGM,CAhGJC,EA+FO,OAAA,CA/FA,WAAgBN,EAAY,CAAA,SAAA,CAAA,EAAE,MAAM,WAAA,GAEzCM,EAgBM,MAAA,KAAA,aAfJA,EAEQ,QAAA,CAFD,IAAI,aAAa,MAAM,8CAAA,EAA+C,eAE7E,EAAA,KACAA,EAQE,QAAA,CAPA,GAAG,aACM,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAf,EAAK,KAAIe,GAClB,KAAK,OACL,SAAA,GACA,YAAY,qDACZ,MAAM,QACL,SAAUC,EAAO,OAAA,aALT,CAAAC,EAAAjB,EAAK,IAAI,CAAA,GAOpBc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAEI,IAFD,CAAA,MAAM,8BAA6B,sEAEtC,EAAA,EAAA,GAIFA,EAIM,MAAA,KAAA,CAHJC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAA8E,QAAvE,CAAA,MAAM,gDAA+C,aAAU,EAAA,GACtEK,EAA6EC,EAAA,CAAlD,WAAAnB,EAAK,SAAL,sBAAAc,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAf,EAAK,SAAQe,GAAG,SAAUC,EAAO,QAAE,MAAM,0CACpEF,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAA8E,IAA3E,CAAA,MAAM,yBAAwB,4CAAyC,EAAA,EAAA,GAI5EA,EAqBM,MAAA,KAAA,CApBJA,EAEQ,QAFRO,EAA+E,oBAC5DhB,EAAa,KAAA,EAAA,CAAA,IAEhCS,EASE,QAAA,CARA,GAAG,eACa,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAf,EAAK,cAAae,GAClC,KAAK,QACL,IAAI,MACJ,IAAI,QACJ,KAAK,MACL,MAAM,SACL,SAAUC,EAAO,OAAA,gBANFhB,EAAK,qBAAb,CAAA,OAAR,EAAmC,CAAA,gBAQrCa,EAGM,MAAA,CAHD,MAAM,mDAAiD,CAC1DA,EAAiB,YAAX,MAAI,EACVA,EAAiB,YAAX,MAAI,QAEZC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAEI,IAFD,CAAA,MAAM,8BAA6B,mFAEtC,EAAA,EAAA,GAIFA,EA6BM,MAAA,KAAA,CA5BJC,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAD,EAEQ,QAFD,CAAA,MAAM,gDAA+C,+BAE5D,EAAA,GACAA,EAqBM,MArBNQ,EAqBM,CApBJR,EASQ,QATRS,EASQ,GARNT,EAME,QAAA,CALS,sBAAAC,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAC,GAAAf,EAAK,SAAQe,GACtB,KAAK,QACL,MAAM,GACN,MAAM,QACL,SAAUC,EAAO,OAAA,aAJT,CAAAO,EAAAvB,EAAK,QAAQ,CAAA,GAMxBc,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAD,EAA8D,OAAxD,CAAA,MAAM,8BAA6B,iBAAc,EAAA,EAAA,UAEzDF,EASQa,EAAA,KAAAC,EATkBC,EAAUC,CAAA,EAAtBC,QAAdjB,EASQ,QAAA,CAT+B,IAAKiB,EAAS,MAAO,MAAM,mBAAA,KAChEf,EAME,QAAA,CALS,sBAAAE,GAAAf,EAAK,SAAQe,EACtB,KAAK,QACJ,MAAOa,EAAS,MACjB,MAAM,QACL,SAAUZ,EAAO,OAAA,aAJT,CAAAO,EAAAvB,EAAK,QAAQ,CAAA,GAMxBa,EAAoE,OAApEgB,EAA4CC,EAAAF,EAAS,KAAK,EAAA,CAAA,CAAA,aAG9Dd,EAAA,EAAA,IAAAA,EAAA,EAAA,EAAAD,EAEI,IAFD,CAAA,MAAM,8BAA6B,0FAEtC,EAAA,EAAA,GAISf,EAAK,OAAhBY,EAAA,EAAAC,EAGM,MAHNoB,EAGM,CAFJb,EAAwDQ,EAAAM,CAAA,EAAA,CAAlD,KAAK,wBAAwB,MAAM,YAAA,GACzCnB,EAAwB,cAAff,EAAK,KAAA,EAAA,CAAA,CAAA,aAIhBe,EAIM,MAJNoB,EAIM,CAHJf,EAESgB,EAAA,CAFA,QAASlB,EAAO,QAAG,UAAWV,EAAW,KAAA,aAChD,IAAiD,KAA9CJ,EAAS,MAAA,eAAA,cAAA,EAAA,CAAA,CAAA,oNC5DpB,MAAMiC,EAAcC,EAAe,EAE7B7B,EAAe,MAAO8B,GAAc,CACpC,GAAA,CACI,MAAAF,EAAY,YAAYE,CAAI,OACpB,CAAA,CAGlB,EAEA,OAAA5B,EAAU,IAAM,CAEd0B,EAAY,WAAW,CAAA,CACxB,cA9CDxB,EAuBM,MAAA,KAAA,CAtBJE,EAQM,MARND,GAQM,CAPJC,EAKM,MALNyB,GAKM,CAJJpB,EAESgB,EAAA,CAFD,QAAQ,QAAS,KAAM,CAAkB,KAAA,QAAA,EAAE,MAAM,wBAAA,aACvD,IAAiE,CAAjEhB,EAAiEQ,EAAAM,CAAA,EAAA,CAA3D,KAAK,sBAAsB,MAAM,kCAEzClB,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAAD,EAAiD,KAA7C,CAAA,MAAM,mBAAkB,mBAAgB,EAAA,EAAA,GAE9CK,EAAmEqB,GAAA,CAAvD,QAASb,EAAWS,CAAA,EAAC,QAAU,SAAQ5B,CAAA,wBAI1CmB,EAAAS,CAAA,EAAY,OAAvBzB,IAAAC,EAUM,MAVNS,GAUM,CATJF,EAAwDQ,EAAAM,CAAA,EAAA,CAAlD,KAAK,wBAAwB,MAAM,YAAA,GACzCnB,EAAoC,OAAA,KAAAiB,EAA3BJ,EAAWS,CAAA,EAAC,KAAK,EAAA,CAAA,EAC1BjB,EAMEgB,EAAA,CALA,QAAQ,QACR,KAAK,KACL,YAAU,WACT,QAAOR,EAAWS,CAAA,EAAC,WACpB,MAAM,aAAA"}